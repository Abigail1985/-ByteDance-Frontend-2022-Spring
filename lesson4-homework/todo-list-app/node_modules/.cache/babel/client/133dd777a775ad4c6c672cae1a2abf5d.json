{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { Store } from 'laco';\nexport var TodoStore = new Store({\n  todos: [],\n  visibilityFilter: 'All'\n}, 'TodoStore');\nexport var addTodo = function addTodo(text) {\n  return TodoStore.set(function (_ref) {\n    var todos = _ref.todos;\n    return {\n      todos: [].concat(_toConsumableArray(todos), [{\n        id: todos.reduce(function (maxId, todo) {\n          return Math.max(todo.id, maxId);\n        }, -1) + 1,\n        completed: false,\n        text: text\n      }])\n    };\n  }, 'Add todo');\n};\nexport var deleteTodo = function deleteTodo(id) {\n  return TodoStore.set(function (_ref2) {\n    var todos = _ref2.todos;\n    return {\n      todos: todos.filter(function (item) {\n        return item.id !== id;\n      })\n    };\n  }, 'Delete todo');\n};\nexport var editTodo = function editTodo(id, text) {\n  return TodoStore.set(function (_ref3) {\n    var todos = _ref3.todos;\n    return {\n      todos: todos.map(function (todo) {\n        return todo.id === id ? _objectSpread(_objectSpread({}, todo), {}, {\n          text: text\n        }) : todo;\n      })\n    };\n  }, 'Edit todo');\n};\nexport var completeTodo = function completeTodo(id) {\n  return TodoStore.set(function (_ref4) {\n    var todos = _ref4.todos;\n    return {\n      todos: todos.map(function (todo) {\n        return todo.id === id ? _objectSpread(_objectSpread({}, todo), {}, {\n          completed: !todo.completed\n        }) : todo;\n      })\n    };\n  }, 'Complete todo');\n};\nexport var completeAllTodos = function completeAllTodos() {\n  var _TodoStore$get = TodoStore.get(),\n      todos = _TodoStore$get.todos;\n\n  var areAllMarked = todos.every(function (todo) {\n    return todo.completed;\n  });\n  TodoStore.set(function () {\n    return {\n      todos: todos.map(function (todo) {\n        return _objectSpread(_objectSpread({}, todo), {}, {\n          completed: !areAllMarked\n        });\n      })\n    };\n  }, 'Complete all todos');\n};\nexport var clearCompletedTodos = function clearCompletedTodos() {\n  return TodoStore.set(function (_ref5) {\n    var todos = _ref5.todos;\n    return {\n      todos: todos.filter(function (t) {\n        return t.completed === false;\n      })\n    };\n  }, 'Clear completed todos');\n};\nexport var getTodosCount = function getTodosCount() {\n  return TodoStore.get().todos.length;\n};\nexport var getCompletedCount = function getCompletedCount(todos) {\n  return todos.reduce(function (count, todo) {\n    return todo.completed ? count + 1 : count;\n  }, 0);\n}; // Visibility filter stuff\n\nexport var setVisibilityFilter = function setVisibilityFilter(type) {\n  return TodoStore.set(function () {\n    return {\n      visibilityFilter: type\n    };\n  }, 'Set visibility');\n};\nexport var getFilteredTodos = function getFilteredTodos(visibilityFilter) {\n  var _TodoStore$get2 = TodoStore.get(),\n      todos = _TodoStore$get2.todos;\n\n  switch (visibilityFilter) {\n    case 'All':\n      return todos;\n\n    case 'Completed':\n      return todos.filter(function (t) {\n        return t.completed;\n      });\n\n    case 'Active':\n      return todos.filter(function (t) {\n        return !t.completed;\n      });\n\n    default:\n      throw new Error(\"Unknown filter: \".concat(visibilityFilter));\n  }\n};","map":{"version":3,"sources":["/Users/abigail/VScodeProject/前端/前端作业/lesson4-homework/todo-list-app/src/stores/todo.jsx"],"names":["Store","TodoStore","todos","visibilityFilter","addTodo","text","set","id","reduce","maxId","todo","Math","max","completed","deleteTodo","filter","item","editTodo","map","completeTodo","completeAllTodos","get","areAllMarked","every","clearCompletedTodos","t","getTodosCount","length","getCompletedCount","count","setVisibilityFilter","type","getFilteredTodos","Error"],"mappings":"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","sourcesContent":["import { Store } from 'laco';\n\nexport const TodoStore = new Store(\n  {\n    todos: [ ],\n    visibilityFilter: 'All',\n  },\n  'TodoStore',\n);\n\nexport const addTodo = text =>\n  TodoStore.set(\n    ({ todos }) => ({\n      todos: [\n        ...todos,\n        {\n          id: todos.reduce((maxId, todo) => Math.max(todo.id, maxId), -1) + 1,\n          completed: false,\n          text,\n        },\n      ],\n    }),\n    'Add todo',\n  );\n\nexport const deleteTodo = id =>\n  TodoStore.set(\n    ({ todos }) => ({\n      todos: todos.filter(item => item.id !== id),\n    }),\n    'Delete todo',\n  );\n\nexport const editTodo = (id, text) =>\n  TodoStore.set(\n    ({ todos }) => ({\n      todos: todos.map(todo => (todo.id === id ? { ...todo, text } : todo)),\n    }),\n    'Edit todo',\n  );\n\nexport const completeTodo = id =>\n  TodoStore.set(\n    ({ todos }) => ({\n      todos: todos.map(todo =>\n        todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n      ),\n    }),\n    'Complete todo',\n  );\n\nexport const completeAllTodos = () => {\n  const { todos } = TodoStore.get();\n  const areAllMarked = todos.every(todo => todo.completed);\n  TodoStore.set(\n    () => ({\n      todos: todos.map(todo => ({\n        ...todo,\n        completed: !areAllMarked,\n      })),\n    }),\n    'Complete all todos',\n  );\n};\n\nexport const clearCompletedTodos = () =>\n  TodoStore.set(\n    ({ todos }) => ({\n      todos: todos.filter(t => t.completed === false),\n    }),\n    'Clear completed todos',\n  );\n\nexport const getTodosCount = () => TodoStore.get().todos.length;\n\nexport const getCompletedCount = todos =>\n  todos.reduce((count, todo) => (todo.completed ? count + 1 : count), 0);\n\n// Visibility filter stuff\nexport const setVisibilityFilter = type =>\n  TodoStore.set(\n    () => ({\n      visibilityFilter: type,\n    }),\n    'Set visibility',\n  );\n\nexport const getFilteredTodos = visibilityFilter => {\n  const { todos } = TodoStore.get();\n  switch (visibilityFilter) {\n    case 'All':\n      return todos;\n    case 'Completed':\n      return todos.filter(t => t.completed);\n    case 'Active':\n      return todos.filter(t => !t.completed);\n    default:\n      throw new Error(`Unknown filter: ${visibilityFilter}`);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}