{"ast":null,"code":"function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!==\"undefined\"&&iter[Symbol.iterator]!=null||iter[\"@@iterator\"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}import{Store}from\"laco\";export var TodoStore=new Store({todos:[{text:\"Use Laco\",completed:false,id:0}],visibilityFilter:\"All\"},\"TodoStore\");export var addTodo=function addTodo(text){return TodoStore.set(function(_ref){var todos=_ref.todos;return{todos:[].concat(_toConsumableArray(todos),[{id:todos.reduce(function(maxId,todo){return Math.max(todo.id,maxId);},-1)+1,completed:false,text:text}])};},\"Add todo\");};export var deleteTodo=function deleteTodo(id){return TodoStore.set(function(_ref2){var todos=_ref2.todos;return{todos:todos.filter(function(item){return item.id!==id;})};},\"Delete todo\");};export var editTodo=function editTodo(id,text){return TodoStore.set(function(_ref3){var todos=_ref3.todos;return{todos:todos.map(function(todo){return todo.id===id?_objectSpread(_objectSpread({},todo),{},{text:text}):todo;})};},\"Edit todo\");};export var completeTodo=function completeTodo(id){return TodoStore.set(function(_ref4){var todos=_ref4.todos;return{todos:todos.map(function(todo){return todo.id===id?_objectSpread(_objectSpread({},todo),{},{completed:!todo.completed}):todo;})};},\"Complete todo\");};export var completeAllTodos=function completeAllTodos(){var todos=TodoStore.get().todos;var areAllMarked=todos.every(function(todo){return todo.completed;});TodoStore.set(function(){return{todos:todos.map(function(todo){return _objectSpread(_objectSpread({},todo),{},{completed:!areAllMarked});})};},\"Complete all todos\");};export var clearCompletedTodos=function clearCompletedTodos(){return TodoStore.set(function(_ref5){var todos=_ref5.todos;return{todos:todos.filter(function(t){return t.completed===false;})};},\"Clear completed todos\");};export var getTodosCount=function getTodosCount(){return TodoStore.get().todos.length;};export var getCompletedCount=function getCompletedCount(todos){return todos.reduce(function(count,todo){return todo.completed?count+1:count;},0);};// Visibility filter stuff\nexport var setVisibilityFilter=function setVisibilityFilter(type){return TodoStore.set(function(){return{visibilityFilter:type};},\"Set visibility\");};export var getFilteredTodos=function getFilteredTodos(visibilityFilter){var todos=TodoStore.get().todos;switch(visibilityFilter){case\"All\":return todos;case\"Completed\":return todos.filter(function(t){return t.completed;});case\"Active\":return todos.filter(function(t){return!t.completed;});default:throw new Error(\"Unknown filter: \"+visibilityFilter);}};","map":{"version":3,"sources":["/Users/abigail/VScodeProject/前端/前端作业/lesson4-homework/todo-list-app/src/stores/todo.js"],"names":["Store","TodoStore","todos","text","completed","id","visibilityFilter","addTodo","set","reduce","maxId","todo","Math","max","deleteTodo","filter","item","editTodo","map","completeTodo","completeAllTodos","get","areAllMarked","every","clearCompletedTodos","t","getTodosCount","length","getCompletedCount","count","setVisibilityFilter","type","getFilteredTodos","Error"],"mappings":"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","sourcesContent":["import { Store } from \"laco\";\n\nexport const TodoStore = new Store(\n  {\n    todos: [\n      {\n        text: \"Use Laco\",\n        completed: false,\n        id: 0\n      }\n    ],\n    visibilityFilter: \"All\"\n  },\n  \"TodoStore\"\n);\n\nexport const addTodo = text =>\n  TodoStore.set(\n    ({ todos }) => ({\n      todos: [\n        ...todos,\n        {\n          id: todos.reduce((maxId, todo) => Math.max(todo.id, maxId), -1) + 1,\n          completed: false,\n          text\n        }\n      ]\n    }),\n    \"Add todo\"\n  );\n\nexport const deleteTodo = id =>\n  TodoStore.set(\n    ({ todos }) => ({\n      todos: todos.filter(item => item.id !== id)\n    }),\n    \"Delete todo\"\n  );\n\nexport const editTodo = (id, text) =>\n  TodoStore.set(\n    ({ todos }) => ({\n      todos: todos.map(todo => (todo.id === id ? { ...todo, text } : todo))\n    }),\n    \"Edit todo\"\n  );\n\nexport const completeTodo = id =>\n  TodoStore.set(\n    ({ todos }) => ({\n      todos: todos.map(todo =>\n        todo.id === id ? { ...todo, completed: !todo.completed } : todo\n      )\n    }),\n    \"Complete todo\"\n  );\n\nexport const completeAllTodos = () => {\n  const todos = TodoStore.get().todos;\n  const areAllMarked = todos.every(todo => todo.completed);\n  TodoStore.set(\n    () => ({\n      todos: todos.map(todo => ({\n        ...todo,\n        completed: !areAllMarked\n      }))\n    }),\n    \"Complete all todos\"\n  );\n};\n\nexport const clearCompletedTodos = () =>\n  TodoStore.set(\n    ({ todos }) => ({\n      todos: todos.filter(t => t.completed === false)\n    }),\n    \"Clear completed todos\"\n  );\n\nexport const getTodosCount = () => TodoStore.get().todos.length;\n\nexport const getCompletedCount = todos =>\n  todos.reduce((count, todo) => (todo.completed ? count + 1 : count), 0);\n\n// Visibility filter stuff\nexport const setVisibilityFilter = type =>\n  TodoStore.set(\n    () => ({\n      visibilityFilter: type\n    }),\n    \"Set visibility\"\n  );\n\nexport const getFilteredTodos = visibilityFilter => {\n  const todos = TodoStore.get().todos;\n  switch (visibilityFilter) {\n    case \"All\":\n      return todos;\n    case \"Completed\":\n      return todos.filter(t => t.completed);\n    case \"Active\":\n      return todos.filter(t => !t.completed);\n    default:\n      throw new Error(\"Unknown filter: \" + visibilityFilter);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}