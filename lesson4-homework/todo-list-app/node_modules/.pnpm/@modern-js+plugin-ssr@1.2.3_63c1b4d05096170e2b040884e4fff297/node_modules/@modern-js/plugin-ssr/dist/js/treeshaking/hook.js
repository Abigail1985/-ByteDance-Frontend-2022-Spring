import ah from 'async_hooks';
var storage = ah !== null && ah !== void 0 && ah.AsyncLocalStorage ? new ah.AsyncLocalStorage() : null;
export var run = function run(headers, next) {
  return storage.run(headers, next);
};
export var useHeaders = function useHeaders() {
  if (!storage) {
    throw new Error("Unable to use async_hook, please confirm the node version\n      ");
  }

  var headers = storage.getStore();

  if (!headers) {
    throw new Error("Can't call useHeaders out of scope, it should be placed on top of the function");
  }

  return headers;
};