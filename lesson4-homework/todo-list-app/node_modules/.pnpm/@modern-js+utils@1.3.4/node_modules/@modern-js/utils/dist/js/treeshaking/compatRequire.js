import { findExists } from "./findExists";
/**
 * Require function compatible with esm and cjs module.
 * @param filePath - File to required.
 * @returns module export object.
 */

export var compatRequire = function compatRequire(filePath) {
  var mod = require(filePath);

  return mod !== null && mod !== void 0 && mod.__esModule ? mod["default"] : mod;
};
export var requireExistModule = function requireExistModule(filename) {
  var extensions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['.ts', '.js'];
  var exist = findExists(extensions.map(function (ext) {
    return "".concat(filename).concat(ext);
  }));

  if (!exist) {
    return null;
  }

  return compatRequire(exist);
};
export var cleanRequireCache = function cleanRequireCache(filelist) {
  filelist.forEach(function (filepath) {
    delete require.cache[filepath];
  });
};