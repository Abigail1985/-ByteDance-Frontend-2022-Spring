"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.requireExistModule = exports.compatRequire = exports.cleanRequireCache = void 0;

var _findExists = require("./findExists");

/**
 * Require function compatible with esm and cjs module.
 * @param filePath - File to required.
 * @returns module export object.
 */
const compatRequire = filePath => {
  const mod = require(filePath);

  return mod !== null && mod !== void 0 && mod.__esModule ? mod.default : mod;
};

exports.compatRequire = compatRequire;

const requireExistModule = (filename, extensions = ['.ts', '.js']) => {
  const exist = (0, _findExists.findExists)(extensions.map(ext => `${filename}${ext}`));

  if (!exist) {
    return null;
  }

  return compatRequire(exist);
};

exports.requireExistModule = requireExistModule;

const cleanRequireCache = filelist => {
  filelist.forEach(filepath => {
    delete require.cache[filepath];
  });
};

exports.cleanRequireCache = cleanRequireCache;