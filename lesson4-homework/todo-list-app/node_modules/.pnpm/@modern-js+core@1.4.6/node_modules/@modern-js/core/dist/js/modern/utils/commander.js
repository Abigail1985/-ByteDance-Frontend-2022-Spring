import { program, Command } from 'commander';

if (!program.hasOwnProperty('commandsMap')) {
  Object.defineProperty(program, 'commandsMap', {
    get() {
      const map = new Map();

      for (const command of program.commands) {
        map.set(command._name, command);
      }

      return map;
    },

    configurable: false
  });
}

export { program, Command };