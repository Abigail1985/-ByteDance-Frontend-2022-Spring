"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.listRender = listRender;

var _chalk = _interopRequireDefault(require("chalk"));

var _pointer = require("./pointer");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Function for rendering list choices
 * @param  {Number} pointer Position of the pointer
 * @return {String}         Rendered content
 */
function listRender(choices, pointer, answers) {
  let output = '';
  let separatorOffset = 0;
  choices.forEach((choice, i) => {
    if (choice.type === 'separator') {
      separatorOffset++; // separator class toString result

      output += `  ${choice}\n`;
      return;
    }

    if (choice.disabled) {
      // TODO confirm
      if (typeof choice.disabled === 'function') {
        choice.disabled = choice.disabled(answers);
      }

      separatorOffset++;
      let choiceItem = '';
      choiceItem += `  - ${choice.name}`;
      choiceItem += ` (${typeof choice.disabled === 'string' ? choice.disabled : 'Disabled'})`;
      output += _chalk.default.dim(choiceItem);
      output += '\n';
      return;
    }

    const isSelected = i - separatorOffset === pointer;
    let line = (isSelected ? `${_pointer.pointer} ` : '  ') + choice.name;

    if (isSelected) {
      line = _chalk.default.cyan(line);
    }

    output += `${line} \n`;
  });
  return output.replace(/\n$/, '');
}